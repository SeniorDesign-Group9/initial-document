\subsection{Controller Subsystem Testing}
\label{sec:controller_subsystem_testing}
The MCU subsystem will undergo a littany of testing. The electrical
characteristics, as well as hardware and software behavior will be tested to
ensure a working product. Any use of "system" or "the system" in this section refers exclusively to, and the entirety of the MCU subsystem.

% Electrical characteristics (to see what it can handle and what it uses)
\subsubsection{Electrical Characteristics}
The MCU subsystem shall adhere to the following electrical characteristics
related to power draw and voltage input in the following states. Unless noted,
all voltages will be in direct current, and all conditions will be tested at
room temperature (77 $\degree$F). 

\paragraph{General Requirements} The system shall be able to accept a voltage
of -0.5 to 3.8 V into V\textsubscript{BAT}, -0.5 to 4.3 V into any digital
IO-configured pin, -0.5 to 2.1 V into any RF-configured pin, and -0.5 to 2.1 V
into any analog-configured pin without damage. The system shall be able to
accept a current of 0 to 620 mA into any pin without damage. The system shall
be able to regulate voltage going into V\textsubscript{BAT}, and provide 3.3 $\pm$ 0.3 V
on its 3V3 rail to any components in the sensing
subsystem that may require it.

\paragraph{Operating Temperature} The system shall be able to operate
nominally within the temperature range of 30 to 140 $\degree$F. Crystal
oscillators shall fall within the thermal drift ratings provided in the
CC3220 technical reference material.

\paragraph{Shutdown Power Draw} The system shall not draw more than 10
$\upmu$A in shut down mode. The system shall not consume more than 100
$\upmu$W in shut down mode.

\paragraph{Critical Power Draw} The system shall not draw more than 1 mA in
critical power mode. The system shall not consume more than 5 mW in critical
power mode.

\paragraph{Low Power Draw} The system shall not draw more than 100 mA while
receiving or idling in low power mode, and shall not draw more than 250
mA while transmitting in low power mode. The system shall not consume more
than 500 mW while receiving or idling in low power mode, and shall not
consume more than 1.25 W while transmitting in low power mode. The system
shall be able to sufficiently power any components in the sensing subsystem in
low power mode.

\paragraph{Active Power Draw} The system shall not draw more than 150 mA while
receiving or idling in active mode, and shall not draw more than 300
mA while transmitting in active mode. The system shall not consume more
than 750 mW while receiving or idling in active mode, and shall not
consume more than 1.50 W while transmitting in active mode. The system
shall be able to sufficiently power any components in the sensing subsystem in
active mode.

\paragraph{Startup Power Draw} The system shall not draw more than 750 mA
within the first 20 seconds of powering on or starting up the system. The
system shall not consume more than 4.00 W within the first 20 seconds of
powering on or starting up the system.

\paragraph{Solar Panels and Battery System} The system shall be able to
operate nominally solely powered off of the solar and battery subsystem
detailed in \autoref{sec:power_subsystem}. The system shall not require any
external power to operate in any modes (e.g. startup, active, etc.).

% Hardware behavior (ability to set and use peripherals n stuff)
\subsubsection{Hardware Behavior}
The MCU subsystem shall pass the following tests related to use of the
CC3220's onboard hardware, peripherals, and supported operations. The
programming developed and test the below criteria will be intended to only
perform testing on the below modules, and may or may not be present in the
product software build.

\paragraph{Upload Programming} The developers shall be able to successfully
upload programming (software) that meets the requirements detailed in
\autoref{sec:controller_subsystem}. The developers shall be able to
successfully upload programming that allows and/or performs unit testing
(as detailed in this section, \autoref{sec:controller_subsystem_testing}).
Programming uploaded to the CC3220 shall execute either upon powering the
system, upon command, or when executing an ISR to start up the system.

\paragraph{I2C} The developers shall be able to initialize I2C. I2C shall
function nominally if used for communication with any other modules in the
overall garden bed system.

\paragraph{Onboard LEDs} The system shall be able to make use of its onboard
LEDs for notifying the user or developers of system states according to the specification in \autoref{sec:controller_subsystem}.

\paragraph{Watchdog Timer} The developers shall be able to initialize the
watchdog timer. The watchdog timer shall behave according to the specification in \autoref{sec:controller_subsystem}.

\paragraph{WiFi Module} The WiFi module shall conform to the 802.11b/g/n
standards. The developers shall be able to configure the WiFi
module to support 802.11b, 802.11g, or 802.11n in WiFi station mode.  The 
developers shall be able to configure the WiFi module to support 802.11b, or
802.11g in WiFi Direct mode. The WiFi module shall allow the system to
connect to either an open WLAN, or a WLAN secured by WPA2 (Personal or
Enterprise). While
connected, the WiFi module shall be capable of sending and receiving
data at speeds of at least 10 kbps at least 80\% of the time.

\paragraph{GPIO} The developers shall be able to configure the GPIO pins to
the configurations available as described by technical reference documentation.
The developers shall be able to set the state of the desired GPIO pins to
the configurations available as described by technical reference documentation.

\paragraph{Interrupts/ISRs} The developers shall be able to configure
the interrupts available on the CC3220 as described by technical reference
documentation to trigger an ISR of their choice. ISRs shall run within 1 second
of triggering the interrupt linked to the specific ISR. An empty ISR shall
return the CC3220 to its previous state before the interrupt (i.e. clear any
flags and return any registers to their previous state).

\paragraph{ADC} The developers shall be able to configure the ADC on the CC3220
to adhere to the parameters described in the technical reference documentation.
The ADC shall be able to measure signals with a voltage of between 0 and 1.8 V.
The ADC shall be able to accurately measure a voltage level down to a
resolution of $\leq$1 mV. The ADC shall be able to measure at a sampling rate
of $\geq$50 kilosamples per second per channel. The ADC shall support
conversion on up to 4 channels. The ADC shall support the ablility to timestamp
samples with the clock mentioned by the technical reference documentation.

\paragraph{Reset Button} The reset button shall be able to "power cycle" the system. The reset button shall not erase
any programming uploaded to the CC3220. The reset button shall not keep the
system from starting for more than 1 second after the button has been released.

\paragraph{Startup} The system shall not take longer than 10 seconds to begin
its programming upon sufficient power delivery to the CC3220 as described by
the by the technical reference documentation. The system shall not perform
the programmed startup sequence unless interrupted to do so, or if given
sufficient power as described by the by the technical reference documentation
after being shut down.

\paragraph{Processor} The central processor of the CC3220 shall maintain at
least a 20 MHz clock speed while in active mode.

\paragraph{Memory} The programming uploaded to the CC3220 shall not take up
more than 64 KB of space in memory.

% Software behavior (actual program)
\subsubsection{Software Behavior} The MCU subsystem shall pass the following
tests related to use of the CC3220 to support application of the product. The
programming developed and test the below criteria is intended to be the
product software build.

\paragraph{Startup} The microcontroller shall behave according to the specifications on startup in \autoref{sec:controller_subsystem} during its startup sequence.

\paragraph{Shutdown} The microcontroller shall behave according to the specifications on shutdown in \autoref{sec:controller_subsystem} during its shutdown sequence.

\paragraph{Reset} The microcontroller shall behave according to the specifications on reset in \autoref{sec:controller_subsystem} during its reset sequence.

\paragraph{Networking} The system shall be able to connect to the user's WLAN if it meets the following standards:
\begin{itemize}
    \item A 2.4 GHz-based wireless network
    \item Contains no security or is secured with WPA2 (Personal or Enterprise)
    \item $\geq$-70 dBm signal strength
    \item Adheres to the standards of 802.11b, g, or n
    \item DHCP or statically-assigned IPv4 addressing
    \item Uses NAT and does not expose system to WAN
    \item Provides DNS to LAN devices
    \item Able to resolve and successfully connect to \texttt{8.8.8.8} and \texttt{google.com} within 5 seconds
\end{itemize}

\paragraph{AWS} The microcontroller shall behave according to the specifications on connecting to and communicating with AWS in \autoref{sec:controller_subsystem}.

\paragraph{Sockets} The microcontroller shall behave according to the specifications on sockets in \autoref{sec:controller_subsystem}.

\paragraph{Solar and Battery} The system shall monitor and update the solar array current and voltage output values at least every 10 seconds. The system shall behave according to the specifications on power modes and battery percentages in \autoref{sec:controller_subsystem}.

\paragraph{Sensing} The system shall monitor and perform analog-to-digital conversion on the spectroscopic sensor values at least every 10 seconds while not in shutdown or critical power mode.